---
name: git-commit
description: 当用户请求 commit、提交代码、git commit 时触发。自动分析变更并生成规范的提交信息，支持多 commit 拆分。
---

# Git Commit

自动分析变更内容，生成符合规范的提交信息。

## 工作流程

### 1. 分析变更

```bash
git status && git diff --stat && git diff
```

**判断提交策略:**

- **单个 commit**: 所有改动服务于同一目的
- **多个 commits**: 包含独立功能或不同类型改动

**拆分判断:** 改动是否服务于同一目的？是否需要一起回滚？是否影响同一模块？—— 有"否"则拆分。

| 应拆分                         | 可合并               |
| ------------------------------ | -------------------- |
| 新功能 + 旧功能优化            | 组件代码 + 组件样式  |
| 功能改动 + Bug 修复            | 功能代码 + 功能测试  |
| 代码逻辑 + 文档更新            |                      |
| 不同模块的优化                 |                      |

> 用户指定部分提交时，详见 [部分提交](references/partial-commit.md)

### 2. 生成提交信息

```
<type>: <简洁描述>

- <详细说明 1>
- <详细说明 2>
```

**Type 分类:**

| Type       | 场景                    | 示例                     |
| ---------- | ----------------------- | ------------------------ |
| `add`      | 新增功能/组件/页面      | add: 新增用户登录功能    |
| `update`   | 更新/优化现有功能       | update: 优化图片加载性能 |
| `fix`      | 修复 bug                | fix: 修复移动端布局错误  |
| `docs`     | 文档变更                | docs: 更新 API 使用说明  |
| `style`    | 代码格式(不影响逻辑)    | style: 统一代码缩进格式  |
| `refactor` | 重构(不改变功能)        | refactor: 重构认证模块   |
| `chore`    | 构建/工具/依赖          | chore: 更新 React 至 18  |

**要求:**

- 首行 < 50 字符
- 详细说明用列表格式
- **禁止任何 AI 痕迹** (Co-Authored-By、Generated by AI 等)

### 3. 文档同步

`fix`/`refactor` 类型提交前询问是否执行 `/aidoc` 更新文档。

### 4. 执行提交

```bash
git add <files>
git commit -m "$(cat <<'EOF'
add: 新增 pricing 组件

- 三栏价格表布局,支持月付/年付切换
- 使用 CSS 变量实现主题定制
EOF
)"
```

### 5. 验证

```bash
git log -1 --format="%C(yellow)%h%Creset - %s%n%b"
git status
```
